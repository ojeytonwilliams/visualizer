---
import Layout from '../layouts/Layout.astro';
import Visualizer from '../components/Visualizer';

import { actions } from 'astro:actions';

// Use this to play with mock data
// import dependencyMap from '../../mock-map-data/dependency-map.json';

// TODO: error handling
const result = await Astro.callAction(actions.getDependencyMap.orThrow, {
  rootDir: '../../../freeCodeCamp/api/src',
});

const { dependencyGraph } = result;
---

<Layout>
  <Visualizer client:load dependencyGraph={dependencyGraph} />
</Layout>
