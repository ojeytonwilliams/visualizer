---
import Layout from '../layouts/Layout.astro';
import Visualizer from '../components/Visualizer';

import { actions } from 'astro:actions';

// Use this to play with mock data
// import dependencyMap from '../../mock-map-data/dependency-map.json';

// TODO: error handling
const { data } = await Astro.callAction(actions.getDependencyMap, {
  rootDir: '../../../freeCodeCamp/api/src',
});
---

<Layout>
  <Visualizer client:load dependencyMap={data!.dependencyMap} />
</Layout>
